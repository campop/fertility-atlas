# Apache httpd.conf extract providing URL routing and other directives

#   Example usage in httpd.conf:
#   
#   # Atlas of Victorian and Edwardian Population
#   Include /path/to/populationspast/.httpd.conf.extract.txt
#   Use MacroPopulationspast "/public-url/populationspast" "/path/to/populationspast/:/path/to/smarty/:/path/to/php/libraries/" "/path/to/populationspast"


<Macro MacroPopulationspast $applicationBaseUrl $includePath $repoPath>
	
	<Location $applicationBaseUrl/>
		php_value include_path "$includePath"
	</Location>
	
	# Enable assets
	Alias $applicationBaseUrl/data/ $repoPath/data/
	Alias $applicationBaseUrl/images/ $repoPath/images/
	Alias $applicationBaseUrl/js/ $repoPath/js/
	Alias $applicationBaseUrl/style/ $repoPath/style/
	
	Use MacroFrontControllerApplication "$applicationBaseUrl/" "Atlas of Victorian and Edwardian Population"
	
	# Application directives
	RewriteRule ^$applicationBaseUrl/(about|import)/$ $applicationBaseUrl/index.html?action=$1 [L,QSA]
	RewriteRule ^$applicationBaseUrl/(about|import)$ $applicationBaseUrl/$1/ [R]
	
</Macro>
